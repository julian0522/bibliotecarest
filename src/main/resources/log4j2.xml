<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">

  <Appenders>
    <!-- Rolling File Appender -->
    <RollingFile name="ArchivoLog"
                 append = "true"
                 fileName="logs/app.log"
                 filePattern="logs/app-%d{yyyy-MM-dd}-%i.log.gz">

      <PatternLayout>
        <Pattern>%d [%t] %-5level %c - %msg%n</Pattern>
      </PatternLayout>

      <Policies>
        <SizeBasedTriggeringPolicy size="10 MB"/>
      </Policies>

      <DefaultRolloverStrategy max="5"/>
    </RollingFile>

    <!-- Async Appender que envuelve el RollingFile -->
    <Async name="AsyncLog">
      <AppenderRef ref="ArchivoLog"/>
    </Async>
  </Appenders>

  <Loggers>
    <Root level="info">
      <!-- Enlazamos el async -->
      <AppenderRef ref="AsyncLog"/>
    </Root>
  </Loggers>

</Configuration>